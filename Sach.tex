\documentclass[12pt]{scrartcl}  % hoặc memoir
\usepackage[utf8]{inputenc}
\usepackage[T5]{fontenc}
\usepackage[vietnamese]{babel}
\usepackage{listings}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{tcolorbox}
\usepackage{tikz}
\usetikzlibrary{calc}
\usepackage{hyperref}
\usepackage{geometry}
\usepackage{minted}
\geometry{a4paper, margin=2.5cm}

% Thiết lập code C++
\definecolor{mybg}{rgb}{0.97,0.97,0.97}
\definecolor{mykeyword}{rgb}{0.13,0.13,0.7}
\definecolor{mycomment}{rgb}{0.0,0.5,0.0}
\definecolor{mystring}{rgb}{0.7,0.13,0.13}

\lstset{
  language=C++,
  backgroundcolor=\color{mybg},
  basicstyle=\ttfamily\small,
  keywordstyle=\color{mykeyword}\bfseries,
  commentstyle=\itshape\color{mycomment},
  stringstyle=\color{mystring},
  numbers=left,
  numberstyle=\tiny,
  stepnumber=1,
  frame=single,
  breaklines=true,
  captionpos=b,
  showspaces=false 
}

\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{Tài liệu C++}
\fancyhead[R]{\thepage}

\title{Hướng dẫn học lập trình C++ cơ bản đến nâng cao}
\author{Dinh Xuan Minh}
\date{\today}

\begin{document}
\maketitle
\tableofcontents

\section*{Lời nói đầu}
Cuốn sách này tổng hợp các đề thi và lời giải chi tiết các bài lập trình dành cho học sinh giỏi lớp 9. Mỗi bài gồm phần đề, phân tích, hướng dẫn giải và code mẫu.

\section{ĐỀ HSG 9 THCS TỈNH HẢI DƯƠNG NĂM HỌC 2024-2025}
\textbf{Thời gian làm bài: 150 phút}

\textbf{Độ khó: }

\subsection{Bài 1: Số tam giác}
\textbf{Đề bài:}
Một lục giác đều với độ dài cạnh là số nguyên dương có thể được ghép bằng một số tam giác đều có độ dài cạnh bằng 1. Ví dụ dưới đây là hai hình lục giác đều được ghép bằng các tam giác đều cạnh 1.
\begin{center}
\begin{tikzpicture}[scale=1]
    \foreach \i in {0,...,5} {
        \coordinate (A\i) at (60*\i:1);
    }
    \draw[thick] (A0) -- (A1) -- (A2) -- (A3) -- (A4) -- (A5) -- cycle;
    \foreach \i in {0,...,5} {
        \draw[thick] (0,0) -- (A\i);
    }
    \node at (0,-1.5) {Hình 1};
    \node at (0,-2.2) {\small Hình lục giác đều độ dài cạnh 1};
    \node at (0,-2.7) {\small được ghép bằng 6 tam giác đều độ dài cạnh 1};
\end{tikzpicture}
\hspace{2cm}
\begin{tikzpicture}[scale=0.8]
    \def\sidelength{1}
    \pgfmathsetmacro{\triheight}{sqrt(3)/2 * \sidelength}
    \draw[thick] (-2,0) -- (-1, {sqrt(3)}) -- (1, {sqrt(3)}) -- (2,0) -- (1, {-sqrt(3)}) -- (-1, {-sqrt(3)}) -- cycle;
    \foreach \i in {-2,-1,0,1,2} {
        \pgfmathsetmacro{\currenty}{\i * \triheight} % Calculate y-coordinate
        \pgfmathsetmacro{\xlim}{2 - abs(\i) * 0.5} % Calculate x-limit based on distance from center (abs(i))
        \draw[thick] (-\xlim, \currenty) -- (\xlim, \currenty);
    }
    \coordinate (O) at (0,0);
    \coordinate (V0) at (2,0);
    \coordinate (V1) at (1, {sqrt(3)});
    \coordinate (V2) at (-1, {sqrt(3)});
    \coordinate (V3) at (-2,0);
    \coordinate (V4) at (-1, {-sqrt(3)});
    \coordinate (V5) at (1, {-sqrt(3)});
    \draw[thick] (O) -- (V0);
    \draw[thick] (O) -- (V1);
    \draw[thick] (O) -- (V2);
    \draw[thick] (O) -- (V3);
    \draw[thick] (O) -- (V4);
    \draw[thick] (O) -- (V5);
    \coordinate (I0) at (1,0);
    \coordinate (I1) at (0.5, {sqrt(3)/2});
    \coordinate (I2) at (-0.5, {sqrt(3)/2});
    \coordinate (I3) at (-1,0);
    \coordinate (I4) at (-0.5, {-sqrt(3)/2});
    \coordinate (I5) at (0.5, {-sqrt(3)/2});
    \draw[thick] (I0)--(I1)--(I2)--(I3)--(I4)--(I5)--cycle;
    \foreach \i in {0,...,5} {
        \pgfmathsetmacro{\j}{mod(\i+1,6)} 
        \coordinate (MidOuter) at ($(V\i)!0.5!(V\j)$);
        \coordinate (MidRadial_i) at (I\i);
        \coordinate (MidRadial_j) at (I\j);
        \draw[thick] (MidOuter) -- (MidRadial_i);
        \draw[thick] (MidOuter) -- (MidRadial_j);
    }
    \node at (0,-2.2) {\small Hình lục giác đều độ dài cạnh 2 được ghép bằng};
    \node at (0,-2.7) {\small 24 tam giác đều độ dài cạnh 1};
\end{tikzpicture}

\end{center}
\textbf{Yêu cầu:}
Hỏi rằng số tam giác đều tối thiểu là bao nhiêu để ghép được $n$ hình lục giác đều với độ dài các cạnh lần lượt là $1, 2, ..., n$.

\textbf{Dữ liệu vào:}

Gồm $T + 1$ dòng:
\begin{itemize}
    \item Dòng đầu tiên chứa số nguyên dương $T$ ($1 \leq T \leq 10^5$) là số lượng test.
    \item Tiếp theo là $T$ dòng, mỗi dòng tiếp theo chứa một số nguyên dương $n$ ($1 \leq n \leq 10^6$) mô tả một bộ dữ liệu.
\end{itemize}

\textbf{Dữ liệu ra:}
Gồm $T$ dòng, mỗi dòng in ra số tam giác đều tối thiểu cần thiết cho bộ dữ liệu tương ứng.

\textbf{Ràng buộc dữ liệu:}

\begin{itemize}
    \item Subtask 1 (60 điểm): $T \le 10$, $n \leq 1000$.
    \item Subtask 2 (40 điểm): $10 < T \le 10^5 $.
\end{itemize}


\textbf{Ví dụ:}
\begin{tcolorbox}[colback=gray!5!white, colframe=blue!50!black, title=Input]
3\\
1\\
2\\
3
\end{tcolorbox}
\begin{tcolorbox}[colback=gray!5!white, colframe=green!50!black, title=Output]
6\\
30\\
84
\end{tcolorbox}

\textbf{Hướng dẫn giải:}


\textbf{Solution C++:}
\begin{lstlisting}
#include <bits/stdc++.h>
using namespace std;
int main() {
    int T;
    cin >> T;
    while (T--) {
        int n;
        cin >> n;
        long long result = 3 * n * (n + 1);
        cout << result << endl;
    }
    return 0;
}
\end{lstlisting}

\subsection{Bài 2: Chia phần}
\textbf{Đề bài:}
Cho dãy số nguyên dương $a_1, a_2, ..., a_n$. Chia dãy này thành hai phần
\begin{itemize}
    \item Phần thứ nhất gồm các số $a_1, a_2, ..., a_k$.
    \item Phần thứ hai gồm các số còn lại.
\end{itemize}

\textbf{Yêu cầu:}
Gọi $T_1$ và $T_2$ lần lượt là tổng các số trong phần thứ nhất và phần thứ hai. Hãy tìm giá trị nhỏ nhất của $|T_1 - T_2|$.
\textbf{Dữ liệu vào:}

Gồm hai dòng:
\begin{itemize}
    \item Dòng đầu tiên chứa số nguyên dương $n (2 < n \leq 10^6)$ là số lượng phần tử trong dãy.
    \item Dòng thứ hai chứa $n$ số nguyên dương $a_1, a_2, ..., a_n$ ($ | a_i | \le 10^9, \forall i = 1,2,...,n$) cách nhau bởi dấu cách.
\end{itemize}

\textbf{Dữ liệu ra:}
Gồm một dòng duy nhất chứa giá trị nhỏ nhất của $|T_1 - T_2|$.

\textbf{Ràng buộc dữ liệu:}

\begin{itemize}
    \item Subtask 1 (75 điểm): $n \le 5000$.
    \item Subtask 2 (25 điểm): $n > 5000$.
\end{itemize}

\textbf{Ví dụ:}
\begin{tcolorbox}[colback=gray!5!white, colframe=blue!50!black, title=Input]
5\\
1 2 3 4 5
\end{tcolorbox}
\begin{tcolorbox}[colback=gray!5!white, colframe=green!50!black, title=Output]
3
\end{tcolorbox}

\textbf{Hướng dẫn giải:}
Dùng toán tử điều kiện hoặc hàm so sánh.

\textbf{Solution C++:}
\begin{lstlisting}
#include <bits/stdc++.h>
using namespace std;
int main() {
    int n;
    cin >> n;
    long long a[n];
    long long sum = 0;
    for (int i = 0; i < n; i++) {
        cin >> a[i];
        sum += a[i];
    }
    
    long long min_diff = LLONG_MAX;
    long long T1 = 0;
    
    for (int i = 0; i < n - 1; i++) {
        T1 += a[i];
        long long T2 = sum - T1;
        min_diff = min(min_diff, abs(T1 - T2));
    }
    
    cout << min_diff << endl;
    return 0;
}
\end{lstlisting}

\subsection{Bài 3: Kiểm tra số chẵn lẻ}
\textbf{Đề bài:}
An có $n$ đoạn thẳng. Cậu ta nhận thấy rằng một số đoạn thẳng cùng chiều dài nên có thể xếp thành những hình vuông.

\textbf{Yêu cầu:}

Hỏi rằng số hình vuông nhiều nhất An có thể xếp được là bao nhiêu?
\textbf{Dữ liệu vào:}
Gồm hai dòng:
\begin{itemize}
    \item Dòng đầu tiên chứa số nguyên dương $n$ ($1 \leq n \leq 3 \times 10^5$) là số lượng đoạn thẳng.
    \item Dòng thứ hai chứa $n$ số nguyên dương $a_1, a_2, ..., a_n$ ($1 \leq a_i \leq 10^{18}$) là độ dài của các đoạn thẳng.
\end{itemize}
\textbf{Dữ liệu ra:}
Gồm một số nguyên duy nhất là số lượng hình vuông nhiều nhất An có thể xếp được.
\textbf{Ràng buộc dữ liệu:}

\begin{itemize}
    \item Subtask 1 (30\%): $n \leq 2000, a_i \leq 10^6$.
    \item Subtask 2 (30\%): $n > 2000, a_i \leq 10^6$.
    \item Subtask 3 (40\%): $n > 2000, a_i \leq 10^{18}$.
\end{itemize}


\textbf{Ví dụ:}
\begin{tcolorbox}[colback=gray!5!white, colframe=blue!50!black, title=Input]
9\\
2 2 2 9 2 2 2 2 2
\end{tcolorbox}
\begin{tcolorbox}[colback=gray!5!white, colframe=green!50!black, title=Output]
2
\end{tcolorbox}

\textbf{Hướng dẫn giải:}
Kiểm tra $n$ chia hết cho 2 hay không.

\textbf{Solution C++:}
\begin{lstlisting}
#include <bits/stdc++.h>
using namespace std;
int main() {
    int n;
    cin >> n;
    long long a[n];
    for (int i = 0; i < n; i++) {
        cin >> a[i];
    }
    
    map<long long, int> count_map;
    for (int i = 0; i < n; i++) {
        count_map[a[i]]++;
    }
    
    long long squares = 0;
    for (auto& pair : count_map) {
        squares += pair.second / 4;
    }
    
    cout << squares << endl;
    
    return 0;
}
\end{lstlisting}

\subsection{Bài 4: Tích lớn nhất}
\textbf{Đề bài:}
Cho một dãy số nguyên dương $a_1, a_2, ..., a_n$.

\textbf{Yêu cầu:}
Hãy tính giá trị lớn nhất của biểu thức $a_i \times a_j \times a_k$ với $1 \leq i < j < k \leq n$.

\textbf{Dữ liệu vào:}
Gồm hai dòng:
\begin{itemize}
    \item Dòng đầu tiên chứa số nguyên dương $n$ ($3 \leq n \leq 3 \times 10^5$) là số lượng phần tử trong dãy.
    \item Dòng thứ hai chứa $n$ số nguyên dương $a_1, a_2, ..., a_n$ ($ |a_i| \leq 10^6$) cách nhau bởi dấu cách.
\end{itemize}

\textbf{Dữ liệu ra:}
Gồm một số nguyên duy nhất là giá trị lớn nhất của biểu thức $a_i \times a_j \times a_k$.

\textbf{Ràng buộc dữ liệu:}
\begin{itemize}
    \item Subtask 1 (40\%): $n \leq 100$.
    \item Subtask 2 (60\%): $n > 100$.
\end{itemize}
\textbf{Ví dụ:}
\begin{tcolorbox}[colback=gray!5!white, colframe=blue!50!black, title=Input]
6\\
5 2 10 1 3 2
\end{tcolorbox}
\begin{tcolorbox}[colback=gray!5!white, colframe=green!50!black, title=Output]
150
\end{tcolorbox}
\textbf{Hướng dẫn giải:}

\textbf{Solution C++:}

\begin{lstlisting}
#include <iostream>
using namespace std;

int main() {
    int n;
    cin >> n;
    long long max_product = 0;
    long long a[3];
    
    for (int i = 0; i < n; i++) {
        long long x;
        cin >> x;
        if (i < 3) {
            a[i] = x;
        } else {
            if (x > a[0]) {
                a[0] = x;
            }
            if (x > a[1]) {
                a[1] = a[0];
                a[0] = x;
            } else if (x > a[2]) {
                a[2] = x;
            }
        }
    }
    
    max_product = a[0] * a[1] * a[2];
    cout << max_product << endl;
    
    return 0;
}
\end{lstlisting}

\subsection{Bài 5: Đếm số cặp}
\textbf{Đề bài:}
Cho một dãy số nguyên dương $a_1, a_2, ..., a_n$.
\textbf{Yêu cầu:}
Hãy đếm số cặp $(i, j)$ với $1 \leq i < j \leq n$ thỏa mãn tính chất: Số $a_i \times a_j$ là một số chính phương (số nguyên dương $x$ được gọi là chính phương nếu tồn tại một số nguyên dương $y$ sao cho $x = y^2$).
\textbf{Dữ liệu vào:}
Gồm hai dòng:
\begin{itemize}
    \item Dòng đầu tiên chứa số nguyên dương $n$ ($n \leq 10^6$) là số lượng phần tử trong dãy.
    \item Dòng thứ hai chứa $n$ số nguyên dương $a_1, a_2, ..., a_n$ ($1 \leq a_i \leq 10^6, \forall i = 1,2,...,n$) cách nhau bởi dấu cách.
\end{itemize}
\textbf{Dữ liệu ra:}
Gồm một số nguyên duy nhất là số lượng cặp $(i, j)$ thỏa mãn tính chất đã nêu.
\textbf{Ràng buộc dữ liệu:}
\begin{itemize}
    \item Subtask 1 (40\%): $n \leq 2000$.
    \item Subtask 2 (40\%): $n > 2000, a_i \leq 10^4$.
    \item Subtask 3 (20\%): $n > 2000, a_i \leq 10^6$.
\end{itemize}
\textbf{Ví dụ:}
\begin{tcolorbox}[colback=gray!5!white, colframe=blue!50!black, title=Input]
5\\
2 8 3 75 27
\end{tcolorbox}
\begin{tcolorbox}[colback=gray!5!white, colframe=green!50!black, title=Output]
4  
\end{tcolorbox}
\textbf{Hướng dẫn giải:}
\textbf{Solution C++:}
\begin{lstlisting}
#include <bits/stdc++.h>
using namespace std;
int main() {
    int n;
    cin >> n;
    vector<int> a(n);
    for (int i = 0; i < n; i++) {
        cin >> a[i];
    }
    
    unordered_map<int, int> freq;
    for (int i = 0; i < n; i++) {
        freq[a[i]]++;
    }
    
    long long count = 0;
    for (auto& pair1 : freq) {
        for (auto& pair2 : freq) {
            if (pair1.first <= pair2.first) {
                int product = pair1.first * pair2.first;
                int root = sqrt(product);
                if (root * root == product) {
                    if (pair1.first == pair2.first) {
                        count += (long long)pair1.second * (pair1.second - 1) / 2;
                    } else {
                        count += (long long)pair1.second * pair2.second;
                    }
                }
            }
        }
    }
    
    cout << count << endl;
    
    return 0;
}
\end{lstlisting}

\end{document}
% \textbf{Đề bài:}

% \textbf{Yêu cầu:}

% \textbf{Dữ liệu vào:}

% \textbf{Dữ liệu ra:}

% \textbf{Ràng buộc dữ liệu:}

% \begin{itemize}

% \end{itemize}


% \textbf{Ví dụ:}
% \begin{tcolorbox}[colback=gray!5!white, colframe=blue!50!black, title=Input]
% 3\\
% 1\\
% 2\\
% 3
% \end{tcolorbox}
% \begin{tcolorbox}[colback=gray!5!white, colframe=green!50!black, title=Output]
% 6\\
% 30\\
% 84
% \end{tcolorbox}
